package sri.data.ws;

import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.UriInfo;

import sri.data.Device;
import sri.data.dao.DeviceDao;
import sri.data.dao.DeviceDaoImpl;


@Path("device")
public class DeviceResource {

	@Context
	protected UriInfo uriInfo;
	@Context
	protected HttpServletRequest req;
	@Context
	protected HttpServletResponse resp;
	
	private DeviceDao deviceDao;

	@GET @Path("all")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
    public List<Device> getDevices() {
		deviceDao = new DeviceDaoImpl();
    	List<Device> devices = deviceDao.getAllDevices();
    	return devices;
    }
	
	//get all devices by typeId
	@GET @Path("all/type/{typeId}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	public List<Device> getAllDevicesByDeviceTypeId(@PathParam("typeId") String typeId){
		deviceDao = new DeviceDaoImpl();
		List<Device> device = deviceDao.getAllDevicesByDeviceTypeId(typeId);
		return device;		
	}
	
	//get all devices by vendor
	@GET @Path("all/vendor/{vendor}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	public List<Device> getAllDevicesByVendor(@PathParam("vendor")String vendor){
		deviceDao = new DeviceDaoImpl();
		List<Device> device = deviceDao.getAllDevicesByVendor(vendor);
		return device;		
	}
	
	// get all devices by site
	@GET @Path("all/site/{site}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	public List<Device> getAllDevicesBySite(@PathParam("site")String site){
		deviceDao = new DeviceDaoImpl();
		List<Device> device = deviceDao.getAllDevicesBySite(site);
		return device;		
	}

	
	// get device by device name
	@GET @Path("{deviceName}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	public Device getDeviceByName(@PathParam("deviceName") String deviceName) {
		deviceDao = new DeviceDaoImpl();
		Device device = deviceDao.getDeviceByName(deviceName);
		return device;
	}
	
	//  get device by site
	@GET @Path("site/{site}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_XML})
	public Device getDeviceBySite(@PathParam("site") String site) {
		deviceDao = new DeviceDaoImpl();
		Device device = deviceDao.getDeviceBySite(site);
		return device;
	}
	
	//get device by vendorId
	@GET @Path("vendor/id/{vendorId}")
	@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
	@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_XML})
	public Device getDeviceByVendorId(@PathParam("vendorId") String vendorId) {
		deviceDao = new DeviceDaoImpl();
		Device device = deviceDao.getDeviceByVendorId(vendorId);
		return device;
	}
	

}
